services:
  hurl:
    build:
      dockerfile: docker/hurl/Dockerfile
    init: true
    volumes:
      - ./tests:/tests
    networks:
      - test
    environment:
      HURL_admin_token: ${HURL_admin_token}

  rust:
    ports: []
    env_file:
      - .env.test
    networks:
      - test

  db:
    volumes:
      - postgres-data-test:/var/lib/postgresql/data
      - ./docker/db/postgresql.conf:/etc/postgresql.conf
    networks:
      - test
    ports: []

  cache:
    volumes:
      - dragonflydata-test:/data
    networks:
      - test
    ports: []


volumes:
  postgres-data-test: ~
  dragonflydata-test: ~

networks:
  test:
    driver: bridge
